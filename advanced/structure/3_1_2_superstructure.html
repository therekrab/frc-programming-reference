<!DOCTYPE html>

<html :class="{'dark': darkMode === 'dark' || (darkMode === 'system' &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches)}" class="scroll-smooth" data-content_root="../../" lang="en" x-data="{ darkMode: localStorage.getItem('darkMode') || localStorage.setItem('darkMode', 'system'), activeSection: '' }" x-init="$watch('darkMode', val =&gt; localStorage.setItem('darkMode', val))">
<head>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta charset="utf-8"/>
<meta content="white" media="(prefers-color-scheme: light)" name="theme-color"/>
<meta content="black" media="(prefers-color-scheme: dark)" name="theme-color"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>3.1.2 - Superstructures and States | The Programming Reference Book</title>
<meta content="3.1.2 - Superstructures and States | The Programming Reference Book" property="og:title"/>
<meta content="3.1.2 - Superstructures and States | The Programming Reference Book" name="twitter:title"/>
<link href="../../_static/pygments.css?v=e72c8e07" rel="stylesheet" type="text/css"/>
<link href="../../_static/theme.css?v=42baaae4" rel="stylesheet" type="text/css"/>
<link href="../../_static/favicon.png" rel="icon"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="../../genindex.html" rel="index" title="Index"/>
<link href="3_1_3_binders.html" rel="next" title="3.1.3 - Binders"/>
<link href="3_1_1_subsystems.html" rel="prev" title="3.1.1 - Subsystems"/>
<script>
    <!-- Prevent Flash of wrong theme -->
      const userPreference = localStorage.getItem('darkMode');
      let mode;
      if (userPreference === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches) {
        mode = 'dark';
        document.documentElement.classList.add('dark');
      } else {
        mode = 'light';
      }
      if (!userPreference) {localStorage.setItem('darkMode', mode)}
    </script>
</head>
<body :class="{ 'overflow-hidden': showSidebar }" @scroll.window="showScrollTop = pageYOffset &gt; 100" class="min-h-screen font-sans antialiased bg-background text-foreground" x-data="{ showSidebar: false, showScrollTop: false }">
<div @click.self="showSidebar = false" class="fixed inset-0 z-50 overflow-hidden bg-background/80 backdrop-blur-sm md:hidden" x-cloak="" x-show="showSidebar"></div><div class="relative flex flex-col min-h-screen" id="page"><a class="absolute top-0 left-0 z-[100] block bg-background p-4 text-xl transition -translate-x-full opacity-0 focus:translate-x-0 focus:opacity-100" href="#content">
      Skip to content
    </a><header class="sticky top-0 z-40 w-full border-b shadow-sm border-border supports-backdrop-blur:bg-background/60 bg-background/95 backdrop-blur"><div class="container flex items-center h-14">
<div class="hidden mr-4 md:flex">
<a class="flex items-center mr-6" href="../../index.html">
<img alt="Logo" class="mr-2 hidden dark:block" height="24" src="../../_static/favicon.png" width="24"/>
<img alt="Logo" class="mr-2 dark:hidden" height="24" src="../../_static/favicon.png" width="24"/><span class="hidden font-bold sm:inline-block text-clip whitespace-nowrap">The Programming Reference Book</span>
</a></div><button @click="showSidebar = true" class="inline-flex items-center justify-center h-10 px-0 py-2 mr-2 text-base font-medium transition-colors rounded-md hover:text-accent-foreground hover:bg-transparent md:hidden" type="button">
<svg aria-hidden="true" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M152.587 825.087q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440Zm0-203.587q-19.152 0-32.326-13.174T107.087 576q0-19.152 13.174-32.326t32.326-13.174h320q19.152 0 32.326 13.174T518.087 576q0 19.152-13.174 32.326T472.587 621.5h-320Zm0-203.587q-19.152 0-32.326-13.174t-13.174-32.326q0-19.152 13.174-32.326t32.326-13.174h440q19.152 0 32.326 13.174t13.174 32.326q0 19.152-13.174 32.326t-32.326 13.174h-440ZM708.913 576l112.174 112.174q12.674 12.674 12.674 31.826t-12.674 31.826Q808.413 764.5 789.261 764.5t-31.826-12.674l-144-144Q600 594.391 600 576t13.435-31.826l144-144q12.674-12.674 31.826-12.674t31.826 12.674q12.674 12.674 12.674 31.826t-12.674 31.826L708.913 576Z"></path>
</svg>
<span class="sr-only">Toggle navigation menu</span>
</button>
<div class="flex items-center justify-between flex-1 space-x-2 sm:space-x-4 md:justify-end">
<div class="flex-1 w-full md:w-auto md:flex-none"><form @keydown.k.window.meta="$refs.search.focus()" action="../../search.html" class="relative flex items-center group" id="searchbox" method="get">
<input aria-label="Search the docs" class="inline-flex items-center font-medium transition-colors bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ring-offset-background border border-input hover:bg-accent focus:bg-accent hover:text-accent-foreground focus:text-accent-foreground hover:placeholder-accent-foreground py-2 px-4 relative h-9 w-full justify-start rounded-[0.5rem] text-sm text-muted-foreground sm:pr-12 md:w-40 lg:w-64" id="search-input" name="q" placeholder="Search ..." type="search" x-ref="search"/>
<kbd class="pointer-events-none absolute right-1.5 top-2 hidden h-5 select-none text-muted-foreground items-center gap-1 rounded border border-border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex group-hover:bg-accent group-hover:text-accent-foreground">
<span class="text-xs">⌘</span>
    K
  </kbd>
</form>
</div>
<nav class="flex items-center space-x-1">
<button @click="darkMode = darkMode === 'light' ? 'dark' : 'light'" aria-label="Color theme switcher" class="relative inline-flex items-center justify-center px-0 text-sm font-medium transition-colors rounded-md hover:bg-accent hover:text-accent-foreground h-9 w-9" type="button">
<svg class="absolute transition-all scale-100 rotate-0 dark:-rotate-90 dark:scale-0" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 685q45.456 0 77.228-31.772Q589 621.456 589 576q0-45.456-31.772-77.228Q525.456 467 480 467q-45.456 0-77.228 31.772Q371 530.544 371 576q0 45.456 31.772 77.228Q434.544 685 480 685Zm0 91q-83 0-141.5-58.5T280 576q0-83 58.5-141.5T480 376q83 0 141.5 58.5T680 576q0 83-58.5 141.5T480 776ZM80 621.5q-19.152 0-32.326-13.174T34.5 576q0-19.152 13.174-32.326T80 530.5h80q19.152 0 32.326 13.174T205.5 576q0 19.152-13.174 32.326T160 621.5H80Zm720 0q-19.152 0-32.326-13.174T754.5 576q0-19.152 13.174-32.326T800 530.5h80q19.152 0 32.326 13.174T925.5 576q0 19.152-13.174 32.326T880 621.5h-80Zm-320-320q-19.152 0-32.326-13.174T434.5 256v-80q0-19.152 13.174-32.326T480 130.5q19.152 0 32.326 13.174T525.5 176v80q0 19.152-13.174 32.326T480 301.5Zm0 720q-19.152 0-32.326-13.17Q434.5 995.152 434.5 976v-80q0-19.152 13.174-32.326T480 850.5q19.152 0 32.326 13.174T525.5 896v80q0 19.152-13.174 32.33-13.174 13.17-32.326 13.17ZM222.174 382.065l-43-42Q165.5 327.391 166 308.239t13.174-33.065q13.435-13.674 32.587-13.674t32.065 13.674l42.239 43q12.674 13.435 12.555 31.706-.12 18.272-12.555 31.946-12.674 13.674-31.445 13.413-18.772-.261-32.446-13.174Zm494 494.761-42.239-43q-12.674-13.435-12.674-32.087t12.674-31.565Q686.609 756.5 705.38 757q18.772.5 32.446 13.174l43 41.761Q794.5 824.609 794 843.761t-13.174 33.065Q767.391 890.5 748.239 890.5t-32.065-13.674Zm-42-494.761Q660.5 369.391 661 350.62q.5-18.772 13.174-32.446l41.761-43Q728.609 261.5 747.761 262t33.065 13.174q13.674 13.435 13.674 32.587t-13.674 32.065l-43 42.239q-13.435 12.674-31.706 12.555-18.272-.12-31.946-12.555Zm-495 494.761Q165.5 863.391 165.5 844.239t13.674-32.065l43-42.239q13.435-12.674 32.087-12.674t31.565 12.674Q299.5 782.609 299 801.38q-.5 18.772-13.174 32.446l-41.761 43Q231.391 890.5 212.239 890t-33.065-13.174ZM480 576Z"></path>
</svg>
<svg class="absolute transition-all scale-0 rotate-90 dark:rotate-0 dark:scale-100" fill="currentColor" height="24" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 936q-151 0-255.5-104.5T120 576q0-138 90-239.5T440 218q25-3 39 18t-1 44q-17 26-25.5 55t-8.5 61q0 90 63 153t153 63q31 0 61.5-9t54.5-25q21-14 43-1.5t19 39.5q-14 138-117.5 229T480 936Zm0-80q88 0 158-48.5T740 681q-20 5-40 8t-40 3q-123 0-209.5-86.5T364 396q0-20 3-40t8-40q-78 32-126.5 102T200 576q0 116 82 198t198 82Zm-10-270Z"></path>
</svg>
</button>
</nav>
</div>
</div>
</header>
<div class="flex-1"><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10"><aside :aria-hidden="!showSidebar" :class="{ 'translate-x-0': showSidebar }" class="fixed inset-y-0 left-0 md:top-14 z-50 md:z-30 bg-background md:bg-transparent transition-all duration-100 -translate-x-full md:translate-x-0 ml-0 p-6 md:p-0 md:-ml-2 md:h-[calc(100vh-3.5rem)] w-5/6 md:w-full shrink-0 overflow-y-auto border-r border-border md:sticky" id="left-sidebar">
<a class="!justify-start text-sm md:!hidden bg-background" href="../../index.html">
<img alt="Logo" class="mr-2 hidden dark:block" height="16" src="../../_static/favicon.png" width="16"/>
<img alt="Logo" class="mr-2 dark:hidden" height="16" src="../../_static/favicon.png" width="16"/><span class="font-bold text-clip whitespace-nowrap">The Programming Reference Book</span>
</a>
<div class="relative overflow-hidden md:overflow-auto my-4 md:my-0 h-[calc(100vh-8rem)] md:h-auto">
<div class="overflow-y-auto h-full w-full relative pr-6"><nav class="table w-full min-w-full my-6 lg:my-8">
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../why_learn_programming.html">Why Learn Programming?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">1 - Git &amp; Version Control</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../git/1_1_version_control.html">1.1 - Version Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/1_2_what_is_git.html">1.2 - What is <code class="docutils literal notranslate"><span class="pre">git</span></code>?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/1_3_github.html">1.3 - GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/1_4_merges.html">1.4 - Merges</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">2 - Intro to FRC Programming</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../intro_frc/2_1_wpilib.html">2.1 - WPILib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_frc/2_2_why_organize.html">2.2 - Why Organize Code?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_frc/2_3_subsystems.html">2.3 - Subsystems</a></li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../intro_frc/commands/index.html">2.4 - Commands<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_1_structure.html">2.4.1 - Command structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_2_interrupts.html">2.4.2 - Interrupting Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_3_subclassing.html">2.4.3 - Subclassing Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_4_compositions.html">2.4.4 - Command Compositions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_5_factories.html">2.4.5 - Command Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_6_decorators.html">2.4.6 - Command Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_7_inline.html">2.4.7 - Inline Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_8_default.html">2.4.8 - Default Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro_frc/commands/2_4_9_proxy.html">2.4.9 - Proxy Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_frc/2_5_triggers.html">2.5 - Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_frc/2_6_scheduler.html">2.6 - Command Scheduler</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">3 - Advanced FRC Programming</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../3_0_about.html">3.0 - Guide to the Advanced Section</a></li>
<li class="toctree-l1 current" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="index.html">3.1 - Program Structure<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul class="current" x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="3_1_1_subsystems.html">3.1.1 - Subsystems</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1.2 - Superstructures and States</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_1_3_binders.html">3.1.3 - Binders</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_1_4_state_theory.html">3.1.4 - State, Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_1_5_state_application.html">3.1.5 - State, Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_2_status_signals.html">3.2 - Tips for CTRE Status Signals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_3_logging.html">3.3 - Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3_4_localization.html">3.4 - Localization</a></li>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../debugging/index.html">3.5 - Debugging<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul x-show="expanded">
<li class="toctree-l2"><a class="reference internal" href="../debugging/3_5_1_causes.html">3.5.1 - What Causes Buggy Code?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/3_5_2_identify.html">3.5.2 - Identify the Issue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/3_5_3_correct.html">3.5.3 - Find and Correct</a></li>
<li class="toctree-l2"><a class="reference internal" href="../debugging/3_5_4_tips.html">3.5.4 - Debugging Tips &amp; Tricks</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">4 - Programming Writeups</span></p>
<ul>
<li class="toctree-l1" x-data="{ expanded: $el.classList.contains('current') ? true : false }"><a :class="{ 'expanded' : expanded }" @click="expanded = !expanded" class="reference internal expandable" href="../../writeups/index.html">4 - Writeups<button @click.prevent.stop="expanded = !expanded" type="button"><span class="sr-only"></span><svg fill="currentColor" height="18px" stroke="none" viewbox="0 0 24 24" width="18px" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg></button></a><ul class="simple" x-show="expanded">
</ul>
</li>
</ul>
</nav>
</div>
</div>
<button @click="showSidebar = false" class="absolute md:hidden right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100" type="button">
<svg class="h-4 w-4" fill="currentColor" height="24" stroke="none" viewbox="0 96 960 960" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M480 632 284 828q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536 576l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480 632Z"></path>
</svg>
</button>
</aside>
<main class="relative py-6 lg:gap-10 lg:py-8 xl:grid xl:grid-cols-[1fr_300px]">
<div class="w-full min-w-0 mx-auto">
<nav aria-label="breadcrumbs" class="flex items-center mb-4 space-x-1 text-sm text-muted-foreground">
<a class="overflow-hidden text-ellipsis whitespace-nowrap hover:text-foreground" href="../../index.html">
<span class="hidden md:inline">The Programming Reference Book</span>
<svg aria-label="Home" class="md:hidden" fill="currentColor" height="18" stroke="none" viewbox="0 96 960 960" width="18" xmlns="http://www.w3.org/2000/svg">
<path d="M240 856h120V616h240v240h120V496L480 316 240 496v360Zm-80 80V456l320-240 320 240v480H520V696h-80v240H160Zm320-350Z"></path>
</svg>
</a>
<div class="mr-1">.</div><a class="hover:text-foreground overflow-hidden text-ellipsis whitespace-nowrap" href="index.html">3.1 - Program Structure</a>
<div class="mr-1">.</div><span aria-current="page" class="font-medium text-foreground overflow-hidden text-ellipsis whitespace-nowrap">3.1.2 - Superstructures and States</span>
</nav>
<div id="content" role="main">
<section id="superstructures-and-states">
<h1>3.1.2 - Superstructures and States<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#superstructures-and-states"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h1>
<p>When writing code, it’s always a good practice to try to enforce as much safety
as you can in the design that you choose. This means writing code into a
structure that is easy to extend and modify, but makes it difficult to break
the “rules” of the design. For example, if I’m building a subsystem, I don’t
want motor objects to be declared as <code class="docutils literal notranslate"><span class="pre">public</span></code>. This would allow other parts
of the program to potentially interface with protected hardware - something we
really <em>don’t</em> want. Instead, we want to keep motor objects <code class="docutils literal notranslate"><span class="pre">private</span></code> so
there’s always only one, consistent, place in the code that can interact
directly with the motor objects.</p>
<p>In robot projects, we have subsystem objects that directly control hardware on
the robot. Although we’ve incorporated safety inside of these subsystems
themselves (by returning <code class="docutils literal notranslate"><span class="pre">Commands</span></code> which use the command scheduler’s
requirements system), we can do more to make sure that there isn’t any
“unauthorized” access to subsystems.</p>
<p>This also helps avoid “partial” commands which may just come from one
subsystem, i.e. a command that is meant to be part of a multisubsystem
sequence. Think of a command returned by <code class="docutils literal notranslate"><span class="pre">shooter.fireShooter()</span></code> that fires a
shooter on the robot, and is meant to be used after the robot finishes one or
more other processes to put the robot in a known configuration, ready to shoot.
We’d generally like to reduce access to the individual, shooter-only
<code class="docutils literal notranslate"><span class="pre">fireShooter</span></code> command, and instead only expose the complete command
composition that represents the complete preparation and shooting sequence.</p>
<p>One potential solution to this problem is to try and use Java’s language rules
regarding visibility modifiers (<code class="docutils literal notranslate"><span class="pre">private</span></code>, <code class="docutils literal notranslate"><span class="pre">protected</span></code>, etc.) to ensure
that only some parts of the codebase can access the subsystem’s command factory
methods. However, the issue here is that this is too restrictive; even using no
modifier would force us (the programmers) into writing code to create these
command compositions in the same package (directory) as the subsystems
themselves, which is a very messy setup.</p>
<p>Instead, we need to limit access to the instances of each subsystem rather than
the methods on them. If only certain parts of our code can access the
subsystems, then only those parts of the code can construct the commands from
the subsystem’s factories. To reiterate the importance of this, remember that
this lets us better ensure that the use of the subsystem’s factory methods are
used in a consistent place in our codebase.</p>
<p>But how do we possible organize our code such that we limit access to each of
the subsystems?</p>
<section id="subsystems-record">
<h2><code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#subsystems-record" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#subsystems-record'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>To avoid passing around multiple subsystems at a time, we can create a simple
<code class="docutils literal notranslate"><span class="pre">record</span></code> in Java that just contains an instance of each subsystem on the
robot.</p>
<p>For example, a robot with a drivetrain, intake, and shooter may have a
<code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record like this:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="kd">record</span> <span class="nc">Subsystems</span><span class="w"> </span><span class="p">(</span><span class="n">Drivetrain</span><span class="w"> </span><span class="n">drive</span><span class="p">,</span><span class="w"> </span><span class="n">Intake</span><span class="w"> </span><span class="n">intake</span><span class="p">,</span><span class="w"> </span><span class="n">Shooter</span><span class="w"> </span><span class="n">shooter</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span></code></pre></div>
</div>
<p>Now, we just have one object to pass around that gives whoever has it access to
all subsystems as one. This makes method signatures easier to write out (only
one argument instead of many), and assuming we don’t write code to extract each
subsystem from an instance of the <code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record, we now only have the
objective of limiting the access to the one object. Our code also will change
less when we add or remove subsystems (which is uncommon, but not impossible).</p>
</section>
<section id="superstructure-class">
<h2><code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#superstructure-class" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#superstructure-class'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>Just creating a <code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record type doesn’t solve the problem that
there’s no good place to access subsystems that ensure that they’re only
accessible from the ‘correct’ locations.</p>
<p>We can create a <code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class that contains a private instance of
the <code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record. Then, we can freely pass around the
<code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> instance while ensuring that access to the internal
subsystems record is still restricted (we’ll get into how to do this in the
next part).</p>
<p>The following is a basic example of a superstructure:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Superstructure.java</span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#id1"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Superstructure</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Subsystems</span><span class="w"> </span><span class="n">subsystems</span><span class="p">;</span>
</span><span id="line-3">
</span><span id="line-4"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="nf">Superstructure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-5"><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">subsystems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Subsystems</span><span class="p">(</span><span class="cm">/* snip */</span><span class="p">);</span>
</span><span id="line-6"><span class="w">  </span><span class="p">}</span>
</span><span id="line-7"><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
<p>Think of the <code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class as a locked box with the subsystems
inside; we can pass the <code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class around as much as we please,
but for now, nobody can touch our individual subsystems. Right now, there is no
code that has the ability to read our subsystems, but now we can start making
the subsystems available to certain classes (not based on program structure
like visibility modifiers, but instead using more flexible methods).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class also is responsible for subsystem-related
initialization (setting default commands if possible, for example). For
instance, the drivetrain’s default command can’t be constructed without the
controller objects, so we can’t completely initialize such a command in the
<code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class (it doesn’t have, nor should it have, the controller
objects). However, because the superstructure class has access to the
subsystems, it can still be responsible for <em>assigning</em> that command to be the
drivetrain’s default command (perhaps with some method <code class="docutils literal notranslate"><span class="pre">setupDrive()</span></code> which
accepts controller objects and passes those into the drivetrain’s
<code class="docutils literal notranslate"><span class="pre">drivetrain.drive(controller)</span></code> command factory). We’re limiting access to the
individual subsystems while still exposing abstract, core functionality.</p>
</section>
<section id="commandbuilder-interface">
<h2><code class="docutils literal notranslate"><span class="pre">CommandBuilder</span></code> interface<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#commandbuilder-interface" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#commandbuilder-interface'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h2>
<p>We now can introduce the final idea on this page: command builder classes.
These classes are intended <em>solely</em> for composing commands from individual
subsystems into complete, robot-ready commands, and these classes are the
<em>only</em> classes that should have the ability to access the subsystem objects.</p>
<p>We can create an interface <code class="docutils literal notranslate"><span class="pre">CommandBuilder</span></code> like this:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">CommandBuilder.java</span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#id2"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">CommandBuilder</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="n">Command</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">Subsystems</span><span class="w"> </span><span class="n">subsystems</span><span class="p">);</span>
</span><span id="line-3"><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
<p>Now we have a special interface that promsises to have a <code class="docutils literal notranslate"><span class="pre">build()</span></code> method
that takes a <code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> instance and returns a <code class="docutils literal notranslate"><span class="pre">Command</span></code> that we can bind
to a <code class="docutils literal notranslate"><span class="pre">Trigger</span></code>.</p>
<p>To finish this system, we have to tell the superstructure that it’s okay to
give any class that implements <code class="docutils literal notranslate"><span class="pre">CommandBuilder</span></code> access to the <code class="docutils literal notranslate"><span class="pre">Subsystems</span></code>
instance by adding the following method to the <code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Superstructure.java</span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#id3"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">CommandBuilder</span><span class="w"> </span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">subsystems</span><span class="p">);</span>
</span><span id="line-3"><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
<p>Now this is the <em>only</em> method that we can use to build commands, and it <em>only</em>
works with classes that explicitly implement <code class="docutils literal notranslate"><span class="pre">CommandBuilder</span></code>. We store the
logic to construct the command from subsystem-specific commands in those
classes,  and then from there we can call <code class="docutils literal notranslate"><span class="pre">superstructure.build()</span></code> and pass
in a command builder class to build a command. The rest of the code can’t
modify the fundamental behavior of this command, because they don’t have access
to the subsystems - only the command builder classes themselves do. We’ve
successfully ensured that all of our commands are constructed in the same,
consistent location, and it’s rather difficult to break this design without
some very noticeable tomfoolery.</p>
<p>To see an example, here’s an example of a <code class="docutils literal notranslate"><span class="pre">IntakePiece</span></code> state:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">IntakePiece.java</span><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#id4"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IntakePiece</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CommandBuilder</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">Subsystems</span><span class="w"> </span><span class="n">subsystems</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-3"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="line-4"><span class="w">        </span><span class="n">subsystems</span><span class="p">.</span><span class="na">elevator</span><span class="p">().</span><span class="na">stow</span><span class="p">(),</span>
</span><span id="line-5"><span class="w">        </span><span class="n">subsystems</span><span class="p">.</span><span class="na">intake</span><span class="p">().</span><span class="na">intakePiece</span><span class="p">())</span>
</span><span id="line-6">
</span><span id="line-7"><span class="w">        </span><span class="p">.</span><span class="na">unless</span><span class="p">(</span><span class="n">subsystems</span><span class="p">.</span><span class="na">intake</span><span class="p">().</span><span class="na">holdingPiece</span><span class="p">());</span>
</span><span id="line-8"><span class="w">  </span><span class="p">}</span>
</span><span id="line-9"><span class="p">}</span>
</span></code></pre></div>
</div>
</div>
<p>This short file represents the robot intaking a gamepiece. Note the call to
<code class="docutils literal notranslate"><span class="pre">.unless()</span></code> after we construct the commands. It’s best if states use the
<code class="docutils literal notranslate"><span class="pre">unless()</span></code> and <code class="docutils literal notranslate"><span class="pre">onlyIf()</span></code> decorators to ensure that the starting
configuration for that state is valid.</p>
<p>command builder classes should also remain small - they really only represent
<em>one</em> possible state of the robot. If a robot can intake a piece multiple
different ways, different states should be used for each way to intake a piece.</p>
<section id="modifications-to-superstructure-build">
<h3>Modifications to <code class="docutils literal notranslate"><span class="pre">Superstructure.build()</span></code><a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#modifications-to-superstructure-build" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#modifications-to-superstructure-build'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>You can add more feature to all commands - not just one, but every command in
<code class="docutils literal notranslate"><span class="pre">Superstructure.build()</span></code>. For example, you may want to proxy each command so
that default commands can run in auton when their subsystem isn’t being
directly used (see <a class="reference internal" href="../../intro_frc/commands/2_4_9_proxy.html"><span class="doc">2.4.9 - Proxy Commands</span></a>). Or you could give the commands better names like so:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">CommandBuilder</span><span class="w"> </span><span class="n">state</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="na">build</span><span class="p">(</span><span class="n">subsystems</span><span class="p">)</span>
</span><span id="line-3"><span class="w">      </span><span class="c1">// Automatically provides nice names to each command</span>
</span><span id="line-4"><span class="w">      </span><span class="p">.</span><span class="na">withName</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getSimpleName</span><span class="p">())</span>
</span><span id="line-5"><span class="w">      </span><span class="c1">// Proxies each command automatically</span>
</span><span id="line-6"><span class="w">      </span><span class="p">.</span><span class="na">asProxy</span><span class="p">();</span>
</span><span id="line-7"><span class="p">}</span>
</span></code></pre></div>
</div>
<p>This gives commands the name of the command builder class that they originated
from, which is helpful for debugging or logging. Any other debugging/logging
postprocessing that you want to apply to each <em>complete</em> command can also be
handled inside of <code class="docutils literal notranslate"><span class="pre">build()</span></code>.</p>
<p>If you decide to use this method of proxying commands, then it is also helpful
to add another method <code class="docutils literal notranslate"><span class="pre">buildWithoutProxy()</span></code> which does the same thing, but
doesn’t proxy the command, in the case that you need that.</p>
</section>
<section id="nesting-complete-commands">
<h3>Nesting complete commands<a @click.prevent="window.navigator.clipboard.writeText($el.href); $el.setAttribute('data-tooltip', 'Copied!'); setTimeout(() =&gt; $el.setAttribute('data-tooltip', 'Copy link to this element'), 2000)" aria-label="Copy link to this element" class="headerlink" data-tooltip="Copy link to this element" href="#nesting-complete-commands" x-intersect.margin.0%.0%.-70%.0%="activeSection = '#nesting-complete-commands'"><svg height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"></path></svg></a></h3>
<p>Consider a case where you have two command builder classes, <code class="docutils literal notranslate"><span class="pre">DoThingA</span></code> and
<code class="docutils literal notranslate"><span class="pre">DoThingB</span></code>. Let’s assume that we’ve followed good principles so far and each
of these classes actually represents a complete robot action. Sometimes we
still want to create a composition where these two commands run in sequence (or
any other composition). Because the only input to a command builder’s
<code class="docutils literal notranslate"><span class="pre">build()</span></code> method is the <code class="docutils literal notranslate"><span class="pre">subsystems</span></code> object, command builders can call
<code class="docutils literal notranslate"><span class="pre">.build()</span></code> on <em>other command builders</em>, too! For example, a <code class="docutils literal notranslate"><span class="pre">DoBoth</span></code>
command builder class may look like:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><code><span id="line-1"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DoBoth</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">CommandBuilder</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-2"><span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">Subsystems</span><span class="w"> </span><span class="n">subsystems</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="line-3"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="line-4"><span class="w">        </span><span class="n">DoThingA</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">subsystems</span><span class="p">),</span>
</span><span id="line-5"><span class="w">        </span><span class="n">DoThingB</span><span class="p">().</span><span class="na">build</span><span class="p">(</span><span class="n">subsystems</span><span class="p">));</span>
</span><span id="line-6"><span class="w">  </span><span class="p">}</span>
</span><span id="line-7"><span class="p">}</span>
</span></code></pre></div>
</div>
<p>Now, we don’t need to worry about repeating the implementation of <code class="docutils literal notranslate"><span class="pre">DoThingA</span></code>
or <code class="docutils literal notranslate"><span class="pre">DoThingB</span></code> because we can simply use them in the implementation for
<code class="docutils literal notranslate"><span class="pre">DoBoth</span></code>.</p>
</section>
</section>
</section>
</div><div class="flex justify-between items-center pt-6 mt-12 border-t border-border gap-4">
<div class="mr-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="3_1_1_subsystems.html">
<svg class="mr-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="15 18 9 12 15 6"></polyline>
</svg>
        3.1.1 - Subsystems
      </a>
</div>
<div class="ml-auto">
<a class="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors border border-input hover:bg-accent hover:text-accent-foreground py-2 px-4" href="3_1_3_binders.html">
        3.1.3 - Binders
        <svg class="ml-2 h-4 w-4" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<polyline points="9 18 15 12 9 6"></polyline>
</svg>
</a>
</div>
</div></div><aside class="hidden text-sm xl:block" id="right-sidebar">
<div class="sticky top-16 -mt-10 max-h-[calc(100vh-5rem)] overflow-y-auto pt-6 space-y-2"><p class="font-medium">On this page</p>
<ul>
<li><a :data-current="activeSection === '#subsystems-record'" class="reference internal" href="#subsystems-record"><code class="docutils literal notranslate"><span class="pre">Subsystems</span></code> record</a></li>
<li><a :data-current="activeSection === '#superstructure-class'" class="reference internal" href="#superstructure-class"><code class="docutils literal notranslate"><span class="pre">Superstructure</span></code> class</a></li>
<li><a :data-current="activeSection === '#commandbuilder-interface'" class="reference internal" href="#commandbuilder-interface"><code class="docutils literal notranslate"><span class="pre">CommandBuilder</span></code> interface</a><ul>
<li><a :data-current="activeSection === '#modifications-to-superstructure-build'" class="reference internal" href="#modifications-to-superstructure-build">Modifications to <code class="docutils literal notranslate"><span class="pre">Superstructure.build()</span></code></a></li>
<li><a :data-current="activeSection === '#nesting-complete-commands'" class="reference internal" href="#nesting-complete-commands">Nesting complete commands</a></li>
</ul>
</li>
</ul>
</div>
</aside>
</main>
</div>
</div><footer class="py-6 border-t border-border md:py-0">
<div class="container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row">
<div class="flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0">
<p class="text-sm leading-loose text-center text-muted-foreground md:text-left">© 2025, Nolan Barker Built with <a class="font-medium underline underline-offset-4" href="https://www.sphinx-doc.org" rel="noreferrer">Sphinx 8.2.3</a></p>
</div>
</div>
</footer>
</div><button :class="{'opacity-0 invisible' : !showScrollTop}" @click="window.scrollTo({top: 0, behavior: 'smooth'})" class="fixed bottom-8 right-8 p-2 z-10 rounded-sm bg-gray-700 text-xs text-white transition-all duration-1000 hover:bg-gray-950 focus:bg-gray-950" id="scrolltop" x-cloak="">
<svg aria-hidden="true" class="inline fill-current mb-[2px]" height="14" viewbox="0 96 960 960" width="14" xmlns="http://www.w3.org/2000/svg">
<path d="M450 896V370L202 618l-42-42 320-320 320 320-42 42-248-248v526h-60Z"></path>
</svg>
  Back to top
</button>
<script src="../../_static/documentation_options.js?v=5929fcd5"></script>
<script src="../../_static/doctools.js?v=9bcbadda"></script>
<script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script defer="defer" src="../../_static/theme.js?v=073f68d9"></script>
</body>
</html>